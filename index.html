<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Camera + Overlay (No AR)</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #000;
  overflow: hidden;
}

/* カメラ映像 */
video {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  object-fit: contain; /* ★重要：歪ませない */
  background: #000;
  z-index: 1;
}

/* 画面に固定するオーバーレイ */
#overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none; /* カメラ操作を邪魔しない */
  z-index: 2;
}

/* 表示したい画像 */
#overlay img {
  width: 60vw;          /* ← 画面基準 */
  max-width: 320px;     /* 上限 */
  aspect-ratio: 1 / 1; /* 正方形想定 */
}

/* 状態表示 */
#ui {
  position: fixed;
  top: env(safe-area-inset-top);
  left: 0;
  right: 0;
  padding: 8px 12px;
  background: rgba(0,0,0,0.6);
  color: #fff;
  font-family: system-ui, sans-serif;
  font-size: 14px;
  z-index: 3;
}
</style>
</head>

<body>

<div id="ui">カメラ起動中…</div>

<video id="cam" playsinline muted></video>

<div id="overlay">
  <img src="overlay.png" alt="overlay">
</div>

<script>
const video = document.getElementById('cam');
const ui = document.getElementById('ui');

async function startCamera() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({
      video: {
        facingMode: { ideal: "environment" },
        width: { ideal: 1280 },
        height: { ideal: 720 }
      },
      audio: false
    });

    video.srcObject = stream;
    await video.play();

    ui.textContent = "カメラ正常（歪みなし・ズームなし）";
  } catch (e) {
    ui.textContent = "エラー: " + e.name;
  }
}

startCamera();
</script>

</body>
</html>
